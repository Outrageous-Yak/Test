<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Aerin — Threshold Chat</title>
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<style>
body{
  margin:0;
  font-family:system-ui,Segoe UI,Roboto,Arial;
  background:#05070d;
  color:#eaf2ff;
}
.wrap{
  display:grid;
  grid-template-columns: 2.2fr 1fr 1fr 1.2fr;
  height:100vh;
  gap:10px;
  padding:10px;
}
.panel{
  background:rgba(10,16,34,.6);
  border:1px solid rgba(160,210,255,.2);
  border-radius:14px;
  display:flex;
  flex-direction:column;
  overflow:hidden;
}
.header{
  padding:8px 10px;
  font-size:12px;
  opacity:.8;
  border-bottom:1px solid rgba(160,210,255,.15);
}
.chat{
  flex:1;
  overflow:auto;
  padding:10px;
  display:flex;
  flex-direction:column;
  gap:8px;
}
.msg{
  padding:8px 10px;
  border-radius:12px;
  max-width:90%;
  white-space:pre-wrap;
}
.user{
  align-self:flex-end;
  background:#2563eb;
}
.aerin{
  align-self:flex-start;
  background:#1f2937;
}
.counter{
  color:#39ff6a;
  font-style:italic;
  font-size:12px;
  margin-top:4px;
}
.inputBar{
  display:flex;
  gap:6px;
  padding:8px;
  border-top:1px solid rgba(160,210,255,.15);
}
textarea{
  flex:1;
  resize:none;
  border-radius:10px;
  border:1px solid rgba(160,210,255,.2);
  background:#020617;
  color:#eaf2ff;
  padding:8px;
}
button{
  border-radius:10px;
  border:1px solid rgba(160,210,255,.2);
  background:#1d4ed8;
  color:white;
  padding:8px 10px;
  cursor:pointer;
}
.toolButtons{
  display:flex;
  gap:8px;
  padding:10px;
}
.toolButtons button{
  flex:1;
}
.imagePanel{
  padding:10px;
  display:flex;
  flex-direction:column;
  gap:10px;
}
.imagePanel img{
  width:100%;
  border-radius:10px;
  border:1px solid rgba(160,210,255,.2);
}
.smallNote{
  font-size:11px;
  opacity:.7;
}
</style>
</head>

<body>
<div class="wrap">

<!-- CHAT -->
<div class="panel">
  <div class="header">Aerin — Threshold Chat</div>
  <div id="chat" class="chat"></div>
  <div class="inputBar">
    <textarea id="input" rows="2" placeholder="Speak."></textarea>
    <button onclick="send()">Send</button>
  </div>
</div>

<!-- TOOLKIT A -->
<div class="panel">
  <div class="header">Dice</div>
  <div class="toolButtons">
    <button onclick="roll(6)">d6</button>
    <button onclick="roll(20)">d20</button>
    <button onclick="roll(12)">d12</button>
  </div>
</div>

<!-- TOOLKIT B -->
<div class="panel">
  <div class="header">Toolkit</div>
</div>

<!-- IMAGE -->
<div class="panel">
  <div class="header">Vision</div>
  <div class="imagePanel">
    <button onclick="openKrea()">Open Realtime Vision (Krea)</button>
    <div class="smallNote">Prompt copied automatically. Paste into Krea.</div>
    <img src="Photo1.png" alt="Aerin portrait"/>
  </div>
</div>

</div>

<script>
const chatEl = document.getElementById("chat");
let aerinCount = 0;
let lastPrompt = "";

function add(role,text,counterText){
  const d=document.createElement("div");
  d.className="msg "+role;
  d.textContent=text;
  if(counterText){
    const c=document.createElement("div");
    c.className="counter";
    c.textContent=counterText;
    d.appendChild(c);
  }
  chatEl.appendChild(d);
  chatEl.scrollTop=chatEl.scrollHeight;
}

add("aerin",
"I’m Aerin.\nBlue-skinned elf. White hair.\nThe prism shield listens.\n\nI’ll form an image every third time I speak."
);

function send(){
  const v=input.value.trim();
  if(!v) return;
  add("user",v);
  input.value="";
  reply(v);
}

function reply(userText){
  aerinCount = (aerinCount % 3) + 1;

  let counter = `(${aerinCount})`;
  if(aerinCount===3) counter = "image generating";

  const replyText = "I hear it.\nThe threshold shifts.";
  add("aerin",replyText,counter);

  lastPrompt =
`blue-skinned elf woman, white hair, prism shield hovering,
fantasy illustration, moody, cinematic,
conversation context: ${userText}`;
}

function roll(sides){
  const r = Math.floor(Math.random()*sides)+1;
  add("aerin",`d${sides}.\nIt lands on ${r}.`);
}

function openKrea(){
  navigator.clipboard.writeText(lastPrompt);
  window.open("https://www.krea.ai/realtime","_blank");
}
</script>
</body>
</html>
